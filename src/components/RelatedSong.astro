---
import { getCollection } from "astro:content";
import { dateFormat } from "../utils";
const { name } = Astro.props;
const { slug } = Astro.params;

const posts = (await getCollection(name)).filter(
  (post: any) => post.slug !== slug,
);
---

{
  posts.length > 0 && (
    <>
      <div class="mt-10">
        <p>Related song</p>
      </div>
      <div class="border-b" />
      <div>
        {posts.map((post: any) => (
          <div class="border-b mb-1 pb-1">
            <a
              href={`/${name}/${post.slug}/`}
              class="shadow-md rounded shadow-orange-300 hover:shadow-orange-600"
            >
              <h5 class="text-xl">{post.data.title}</h5>
            </a>
            <p class="text-sm mt-n4">
              <time datetime={post.data.pubDate}>
                {dateFormat(post.data.pubDate)}
              </time>{" "}
            </p>
          </div>
        ))}
      </div>
    </>
  )
}
